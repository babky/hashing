\begin{section}{Models of uniform choice of a linear map}
Technical preparations also include some models which show how uniform choice of a random linear map can be performed. These models are later used to simplify some proofs assuming uniform choice of linear transformation. Instead of simply choosing linear map we select other objects that uniquely define a linear function and work with them. When uniformly performing mentioned selections we obtain uniform selection of suitable linear function.

Definition $\ref{definition-system-of-linear-transformations}$ of systems of linear maps can be extended to denote not only the sets of all linear maps but all surjective linear maps as well. This notation is especially useful when considering various models of choice of (surjective) linear transformation.
\begin{definition}
Let $A$ and $B$ be two vector spaces. Define the set of all linear transformations
\[
LT(A, B) = \{ T: A \rightarrow B \setdelim T \text{ linear transformation} \}
\]
and
\[
LTS(A, B) = \{ T: A \rightarrow B \setdelim T \text{ surjective linear transformation} \}
\] set of all surjective linear transformations between vector spaces $A$ and $B$.
\end{definition} 

\begin{definition}[Uniform selection model]
Let $A$ be a set such that $A = \{ a_1, \dots, a_n \}$. By random uniform selection of element $a \in A$ we understand a model of selection where 
\[
	\Prob{a \in A \text{ was selected}} = \frac{1}{n} \text{.}
\]
\end{definition}

The first model depicts correspondence between uniform choice of a basis of the source space that is mapped onto a fixed basis of the target space and uniform choice of surjective linear transformation.
\begin{remark}[Surjective linear map selection]
\label{remark-model-surjective-linear-map-selection}
Let $\mathcal{B}$ be a set of all bases of vector space $\mathbb{Z}_2^u$ and $\{y_1, \dots, y_t\}$ be a basis of vector space $\mathbb{Z}_2^t$ where $t \leq u$ and let vectors in bases be lexicographically ordered. Define \[\mathcal{S} = \{\{a_1, \dots, a_{u - t}\} \setdelim 1 \leq a_1 < \dots < a_{u-t} \leq u \} \text{.} \] For a random uniform choice of basis $b = \{b_1, \dots, b_u\} \in \mathcal{B}$, $s \in \mathcal{S}$ and permutation $\pi \in \Pi_t$ define linear map $T_{b, s, \pi}$ as
\[
T_{b, s, \pi}(b_i) =  
  \begin{cases} 
    y_{\pi(i)} & \text{if } i \notin s \\
    0 & \text{if } i \in s
  \end{cases} \text{.}
\]
If we perform these random uniform choices of $b, s$ and $\pi$ we obtain randomly and uniformly selected surjective linear map $T_{b, s, \pi}$.
\end{remark}
\begin{proof}
First remark that $T_{b, s, \pi}$ is a surjective linear map for every choice of $b \in \mathcal{B}$ and $s \in \mathcal{S}$. From the fact that $T_{b, s, \pi}$ is defined for every vector of the basis $b$ we known it may be uniquely extended to a linear map. It is surjective since for every vector $y_i$, $1 \leq i \leq t$ there is a vector $b_j$, $1 \leq j \leq u$ such that $T_{b, s, \pi}(b_j) = y_i$. 

Now we show that for every surjective linear transformation $T$ there is a choice $b, s$ and $\pi$ such that $T_{b, s, \pi} = T$. Consider set $T^{-1}(0)$, it certainly contains $t$ linearly independent vectors, denote them as $B_0$. Now consider set $\mathbb{Z}_2^u - T^{-1}(0)$, it must contain $u - t$ linearly independent vectors $c_1, \dots, c_{u-t}$ such that $T(c_i) \neq T(c_j)$ for $1 \leq i \neq j \leq u - t$. Let $B_1 = \{c_1, \dots, c_{u - t}\}$ denote them. A basis $b$ can be formed from $B_0 \cup B_1$. We can select vectors of $b$ by using $s$ so that we obtain $B_1$. They must permuted by $\pi$ to get $T$. 

It must be proved that for each pair of functions $T_{b_1, s_1, \pi_1}$ and $T_{b_2, s_2, \pi_2}$ there is the same number of choices generating it. Consider the identity isomorphism $id_{b_1, b_2}$ of vector space $\mathbb{Z}_2^u$ mapping $i$-th vector of base $b_1$ onto $i$-th vector of base $b_2$. Every choice generating $T_{b_1, s_1, \pi_1}$ can be uniquely transformed by $id_{b_1, b_2}$ to a choice generating $T_{b_2, s_2, \pi_2}$.
\end{proof}

\begin{remark}
\label{remark-model-uniform-linear-map-selection}
Let $t, u, w$ be natural natural numbers such that $t \leq l$. For a random uniform choice of a linear transformation $T_0: \mathbb{Z}_2^w \rightarrow \mathbb{Z}_2^u$ among $LT(\mathbb{Z}_2^w, \mathbb{Z}_2^u)$ and $T_1: \mathbb{Z}_2^u \rightarrow \mathbb{Z}_2^t$ among $LTS(\mathbb{Z}_2^u, \mathbb{Z}_2^t)$ we obtain random uniform choice of linear transformation $T = T_1 \circ T_0$ among $LT(\mathbb{Z}_2^w, \mathbb{Z}_2^t)$.
\end{remark}
\begin{proof}
The idea of the proof is generally the same as in the previous remark. We show that every linear map $T$ can be generated by a constant number of choices $T_0, T_1$ and every map $T$ can be generated.

First notice that for every $T$ and $T_1$ there is the same number of linear maps $T_0$ such that $T_1 \circ T_0 = T$. Let $M, M_0, M_1$ denote matrices of linear functions $T, T_0, T_1$. Since $T_1$ is surjective $\rank{M_1} = t$ therefore solution $x$ of system of linear equations $M_1 x = y$ certainly exists. Moreover lemma \ref{lemma-system-of-linear-equations-solution-count} shows that the number of all such solutions is constant for every vector $y$ and matrix $M_1$. Thus the number of all matrix solutions $M_0$ of the system $M_1 M_0 = M$ where $M_1$ and $M$ are given remains the same.

Now we need to estimate how many surjective pairs $T_1 \in LTS(\mathbb{Z}_2^u, \mathbb{Z}_2^t)$ can generate given mapping $T: \mathbb{Z}_2^w \rightarrow \mathbb{Z}_2^t$. Let $M, M'$ denote matrices of two different linear transformations $T, T' \in LT(\vecspace{w}, \vecspace{t})$. Matrix $M$ can be uniquely transformed to matrix $M'$ by an automorphism $id_{M, M'}$ defined by matrix $L$.
\[
	M' = LM
\]
If $T_0, T_1$ generates $T$ and $T_0', T_1'$ generates $T'$ we can substitute into previous.
\[
	M_1' M_0' = L M_1 M_0
\]

Every pair $T_0, T_1$ generating $T$ can be uniquely mapped by $id_{M, M'}$ onto choice $T_0', T_1'$ generating $T'$. Bijection $id_{M, M'}$ transforms $T_1$ to $T_1'$ and vice-versa. From the previous notice for each function $T_1$ there is constant number of transformations $T_0$ leading to $T = T_1 T_0$.

Finally for every linear map $T$ there is constant number of pairs $T_0, T_1$ leading to $T$. Because of uniformity of selection the probability of choosing pair $T_0, T_1$ leading to $T = T_1 \circ T_0$ is constant for every map $T$.
\end{proof}

\begin{remark}
\label{remark-model-uniform-linear-map-selection-affine}
Let $U, A, B$ be vector spaces, $T_0: U \rightarrow A$ be a random uniformly chosen linear map among $LT(U, A)$ and $T_1: A \rightarrow B$ be a random uniformly chosen surjective linear map from $LTS(A, B)$. Set $T = T_1 \circ T_0$. For a vector $\vec{y} \in B$ define $U' = T^{-1}(\vec{y})$ and $A' = T_1^{-1}(\vec{y})$. Then $T_0|_{U'}: U' \rightarrow A'$ is a random affine linear map chosen among all affine linear maps $LT_{A}(U', A')$.
\end{remark}
\begin{proof}
Define $U_0 = T^{-1}(0)$, $A_0 = T_1^{-1}(0)$ and $D_1 = D_0 ^ {\bot}$. There is one to one relationship among linear transformation $T_0: U \rightarrow A$ and pairs of mappings $T_0|_{D_0}$ and $T_0|_{D_1}$. The uniform choice of $h$ corresponds to uniform and independent choices of $T_0|_{D_0}$ and $T_0|_{D_1}$. 

When $\vec{y} = \vec{0}$ then we have uniform selection of mapping $T_0|_{U'} = T_0|_{D_0}$. When $\vec{y} \neq \vec{0}$ selected affine mapping $T_0|_{U'}$ is defined as $T_0|_{U'}(\vec{x}) = \vec{u} + T_0|_{D_0}(\vec{x} - \vec{v})$ for arbitrary but fixed vectors $\vec{u} \in A'$, $\vec{v} \in U'$. Once again note that vectors $\vec{u}, \vec{v}$ can not vary for different choices of function $T_0$. Moreover it uniquely corresponds to its defining function $T_0|_{D_0}$.
\end{proof}
\end{section}
